<html>
<head>
<title>This is a Test</title>
<script type="application/json" id="siloMapping">
  {
    "silos":[
      {  "name":"silo1",
         "id":"1",
         "mailDropAddr":"<a href='maildrop@greenhouse.io'>maildrop@greenhouse.io</a>",
         "flyOnTheWallAddr":"<a href='flyonthewall@greenhouse.io'>flyonthewall@greenhouse.io</a>",
         "schedulingAddr":"<a href='schedule@ghcalendar.io'>schedule@ghcalendar.io</a>"
      },
      {  "name":"silo2",
         "id":"2",
         "mailDropAddr":"<a href='maildrop@ivy.greenhouse.io'>maildrop@ivy.greenhouse.io</a>",
         "flyOnTheWallAddr":"<a href='flyonthewall@ivy.greenhouse.io'>flyonthewall@ivy.greenhouse.io</a>",
         "schedulingAddr":"<a href='schedule@ivy.ghcalendar.io'>schedule@ivy.ghcalendar.io</a>"
     }
   ]
  }
</script>
<script type="application/javascript">
  function populateAddresses() {
  var siloArr=JSON.parse(document.getElementById('siloMapping').innerHTML);
  console.log(siloArr);
  var siloName="silo2";
  var siloIndex=-1;
  console.log(Object.keys(siloArr.silos).length);
  for (var i=0; i<Object.keys(siloArr.silos).length; i++) {
    console.log(siloArr.silos[i].name);
    if ( siloName == siloArr.silos[i].name ) { siloIndex=i; }
  }
  document.getElementById('custSilo').innerHTML = "silo" + (siloIndex+1); 
  
  //maildrop dynamic address content
  var mailDropRefs = document.getElementsByName("mailDropAddress");
  for (var i=0; i<mailDropRefs.length; i++) { 
    if (siloIndex != -1) { mailDropRefs[i].innerHTML = siloArr.silos[siloIndex].mailDropAddr; }
    else { mailDropRefs[i].innerHTML = "unknown address"; }
  }
  
  //flyonthewall dynamic address content
  var flyOnTheWallRefs = document.getElementsByName("flyOnTheWallAddress");
  for (var i=0; i<flyOnTheWallRefs.length; i++) {
    if (siloIndex != -1) { flyOnTheWallRefs[i].innerHTML = siloArr.silos[siloIndex].flyOnTheWallAddr; }
    else { flyOnTheWallRefs[i].innerHTML = "unknown address"; }
  }

  //schedule dynamic address content
  var schedulingRefs = document.getElementsByName("schedulingAddress");
  for (var i=0; i<schedulingRefs.length; i++) {
    if (siloIndex != -1) { schedulingRefs[i].innerHTML = siloArr.silos[siloIndex].schedulingAddr; }
    else { schedulingRefs[i].innerHTML = "unknown address"; }
  }
}
</script>
</head>
<body onload="populateAddresses()";>
  Silo: <span id="custSilo"></span><br>
  Maildrop Address: <span name="mailDropAddress"></span><br>
  Another Maildrop Address Reference: <span name="mailDropAddress"></span><br>
  FlyOnTheWall Address: <span name="flyOnTheWallAddress"></span><br>
  Scheduling Address: <span name="schedulingAddress"></span><br>
</body>


</html>
